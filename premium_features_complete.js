// ============================================
// ã‚ˆã‚‹ã®ã“ã¨ã° v8.0.0 ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½ï¼ˆå®Œå…¨ç‰ˆï¼‰
// ============================================

// ============================================
// 1. ç›¸æ€§ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
// ============================================

// æ˜Ÿåº§ã®ç›¸æ€§ã‚¹ã‚³ã‚¢ï¼ˆ12Ã—12ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ï¼‰
const ZODIAC_COMPATIBILITY = {
  'ãŠã²ã¤ã˜åº§': {
    'ãŠã²ã¤ã˜åº§': 70, 'ãŠã†ã—åº§': 50, 'ãµãŸã”åº§': 85,
    'ã‹ã«åº§': 60, 'ã—ã—åº§': 95, 'ãŠã¨ã‚åº§': 55,
    'ã¦ã‚“ã³ã‚“åº§': 75, 'ã•ãã‚Šåº§': 65, 'ã„ã¦åº§': 90,
    'ã‚„ãåº§': 55, 'ã¿ãšãŒã‚åº§': 80, 'ã†ãŠåº§': 60
  },
  'ãŠã†ã—åº§': {
    'ãŠã²ã¤ã˜åº§': 50, 'ãŠã†ã—åº§': 75, 'ãµãŸã”åº§': 60,
    'ã‹ã«åº§': 90, 'ã—ã—åº§': 65, 'ãŠã¨ã‚åº§': 95,
    'ã¦ã‚“ã³ã‚“åº§': 70, 'ã•ãã‚Šåº§': 85, 'ã„ã¦åº§': 55,
    'ã‚„ãåº§': 90, 'ã¿ãšãŒã‚åº§': 60, 'ã†ãŠåº§': 85
  },
  'ãµãŸã”åº§': {
    'ãŠã²ã¤ã˜åº§': 85, 'ãŠã†ã—åº§': 60, 'ãµãŸã”åº§': 70,
    'ã‹ã«åº§': 65, 'ã—ã—åº§': 80, 'ãŠã¨ã‚åº§': 75,
    'ã¦ã‚“ã³ã‚“åº§': 95, 'ã•ãã‚Šåº§': 60, 'ã„ã¦åº§': 85,
    'ã‚„ãåº§': 55, 'ã¿ãšãŒã‚åº§': 90, 'ã†ãŠåº§': 65
  },
  'ã‹ã«åº§': {
    'ãŠã²ã¤ã˜åº§': 60, 'ãŠã†ã—åº§': 90, 'ãµãŸã”åº§': 65,
    'ã‹ã«åº§': 80, 'ã—ã—åº§': 70, 'ãŠã¨ã‚åº§': 85,
    'ã¦ã‚“ã³ã‚“åº§': 65, 'ã•ãã‚Šåº§': 95, 'ã„ã¦åº§': 60,
    'ã‚„ãåº§': 75, 'ã¿ãšãŒã‚åº§': 55, 'ã†ãŠåº§': 95
  },
  'ã—ã—åº§': {
    'ãŠã²ã¤ã˜åº§': 95, 'ãŠã†ã—åº§': 65, 'ãµãŸã”åº§': 80,
    'ã‹ã«åº§': 70, 'ã—ã—åº§': 75, 'ãŠã¨ã‚åº§': 60,
    'ã¦ã‚“ã³ã‚“åº§': 85, 'ã•ãã‚Šåº§': 70, 'ã„ã¦åº§': 95,
    'ã‚„ãåº§': 60, 'ã¿ãšãŒã‚åº§': 75, 'ã†ãŠåº§': 65
  },
  'ãŠã¨ã‚åº§': {
    'ãŠã²ã¤ã˜åº§': 55, 'ãŠã†ã—åº§': 95, 'ãµãŸã”åº§': 75,
    'ã‹ã«åº§': 85, 'ã—ã—åº§': 60, 'ãŠã¨ã‚åº§': 80,
    'ã¦ã‚“ã³ã‚“åº§': 70, 'ã•ãã‚Šåº§': 85, 'ã„ã¦åº§': 55,
    'ã‚„ãåº§': 95, 'ã¿ãšãŒã‚åº§': 65, 'ã†ãŠåº§': 80
  },
  'ã¦ã‚“ã³ã‚“åº§': {
    'ãŠã²ã¤ã˜åº§': 75, 'ãŠã†ã—åº§': 70, 'ãµãŸã”åº§': 95,
    'ã‹ã«åº§': 65, 'ã—ã—åº§': 85, 'ãŠã¨ã‚åº§': 70,
    'ã¦ã‚“ã³ã‚“åº§': 80, 'ã•ãã‚Šåº§': 75, 'ã„ã¦åº§': 85,
    'ã‚„ãåº§': 65, 'ã¿ãšãŒã‚åº§': 95, 'ã†ãŠåº§': 70
  },
  'ã•ãã‚Šåº§': {
    'ãŠã²ã¤ã˜åº§': 65, 'ãŠã†ã—åº§': 85, 'ãµãŸã”åº§': 60,
    'ã‹ã«åº§': 95, 'ã—ã—åº§': 70, 'ãŠã¨ã‚åº§': 85,
    'ã¦ã‚“ã³ã‚“åº§': 75, 'ã•ãã‚Šåº§': 80, 'ã„ã¦åº§': 65,
    'ã‚„ãåº§': 90, 'ã¿ãšãŒã‚åº§': 60, 'ã†ãŠåº§': 95
  },
  'ã„ã¦åº§': {
    'ãŠã²ã¤ã˜åº§': 90, 'ãŠã†ã—åº§': 55, 'ãµãŸã”åº§': 85,
    'ã‹ã«åº§': 60, 'ã—ã—åº§': 95, 'ãŠã¨ã‚åº§': 55,
    'ã¦ã‚“ã³ã‚“åº§': 85, 'ã•ãã‚Šåº§': 65, 'ã„ã¦åº§': 80,
    'ã‚„ãåº§': 60, 'ã¿ãšãŒã‚åº§': 90, 'ã†ãŠåº§': 70
  },
  'ã‚„ãåº§': {
    'ãŠã²ã¤ã˜åº§': 55, 'ãŠã†ã—åº§': 90, 'ãµãŸã”åº§': 55,
    'ã‹ã«åº§': 75, 'ã—ã—åº§': 60, 'ãŠã¨ã‚åº§': 95,
    'ã¦ã‚“ã³ã‚“åº§': 65, 'ã•ãã‚Šåº§': 90, 'ã„ã¦åº§': 60,
    'ã‚„ãåº§': 85, 'ã¿ãšãŒã‚åº§': 70, 'ã†ãŠåº§': 80
  },
  'ã¿ãšãŒã‚åº§': {
    'ãŠã²ã¤ã˜åº§': 80, 'ãŠã†ã—åº§': 60, 'ãµãŸã”åº§': 90,
    'ã‹ã«åº§': 55, 'ã—ã—åº§': 75, 'ãŠã¨ã‚åº§': 65,
    'ã¦ã‚“ã³ã‚“åº§': 95, 'ã•ãã‚Šåº§': 60, 'ã„ã¦åº§': 90,
    'ã‚„ãåº§': 70, 'ã¿ãšãŒã‚åº§': 85, 'ã†ãŠåº§': 65
  },
  'ã†ãŠåº§': {
    'ãŠã²ã¤ã˜åº§': 60, 'ãŠã†ã—åº§': 85, 'ãµãŸã”åº§': 65,
    'ã‹ã«åº§': 95, 'ã—ã—åº§': 65, 'ãŠã¨ã‚åº§': 80,
    'ã¦ã‚“ã³ã‚“åº§': 70, 'ã•ãã‚Šåº§': 95, 'ã„ã¦åº§': 70,
    'ã‚„ãåº§': 80, 'ã¿ãšãŒã‚åº§': 65, 'ã†ãŠåº§': 90
  }
};

// ã‚­ãƒ£ãƒ©ã‚¿ã‚¤ãƒ—ã®å®šç¾©
const CHARACTER_TYPES = {
  'yume_kobuta': { type: 'ç™’ã—ç³»', energy: 'å†…å‘', thinking: 'æ„Ÿæƒ…' },
  'umi_rakko': { type: 'ç™’ã—ç³»', energy: 'å¤–å‘', thinking: 'æ„Ÿæƒ…' },
  'mori_risu': { type: 'æ´»ç™ºç³»', energy: 'å¤–å‘', thinking: 'æ€è€ƒ' },
  'hana_panda': { type: 'èª¿å’Œç³»', energy: 'å¤–å‘', thinking: 'æ„Ÿæƒ…' },
  'sora_unicorn': { type: 'ç†æƒ³å®¶', energy: 'å†…å‘', thinking: 'ç›´æ„Ÿ' },
  'yuki_hakucho': { type: 'ç†æƒ³å®¶', energy: 'å†…å‘', thinking: 'ç›´æ„Ÿ' },
  'niji_koala': { type: 'ç™’ã—ç³»', energy: 'å†…å‘', thinking: 'æ„Ÿæƒ…' },
  'hi_no_tora': { type: 'æƒ…ç†±ç³»', energy: 'å¤–å‘', thinking: 'è¡Œå‹•' },
  'tsuki_hyou': { type: 'çŸ¥æ€§ç³»', energy: 'å†…å‘', thinking: 'æ€è€ƒ' },
  'hoshi_kuma': { type: 'ç™’ã—ç³»', energy: 'å¤–å‘', thinking: 'æ„Ÿæƒ…' },
  'kaze_uma': { type: 'è‡ªç”±äºº', energy: 'å¤–å‘', thinking: 'è¡Œå‹•' },
  'kaze_ookami': { type: 'çŸ¥æ€§ç³»', energy: 'å†…å‘', thinking: 'ç›´æ„Ÿ' },
  'honoo_phoenix': { type: 'æƒ…ç†±ç³»', energy: 'å¤–å‘', thinking: 'è¡Œå‹•' },
  'sakura_usagi': { type: 'èª¿å’Œç³»', energy: 'å¤–å‘', thinking: 'æ„Ÿæƒ…' },
  'yozora_fukurou': { type: 'çŸ¥æ€§ç³»', energy: 'å†…å‘', thinking: 'æ€è€ƒ' },
  'taiyou_lion': { type: 'æƒ…ç†±ç³»', energy: 'å¤–å‘', thinking: 'è¡Œå‹•' },
  'ame_iruka': { type: 'ç™’ã—ç³»', energy: 'å¤–å‘', thinking: 'æ„Ÿæƒ…' },
  'komorebi_shika': { type: 'ç™’ã—ç³»', energy: 'å†…å‘', thinking: 'æ„Ÿæƒ…' },
  'yuuyake_kitsune': { type: 'çŸ¥æ€§ç³»', energy: 'å¤–å‘', thinking: 'æ€è€ƒ' },
  'akatsuki_washi': { type: 'è‡ªç”±äºº', energy: 'å¤–å‘', thinking: 'è¡Œå‹•' },
  'shizuku_penguin': { type: 'èª å®Ÿç³»', energy: 'å†…å‘', thinking: 'æ€è€ƒ' },
  'nijiiro_dragon': { type: 'ç†æƒ³å®¶', energy: 'å¤–å‘', thinking: 'ç›´æ„Ÿ' },
  'mayonaka_neko': { type: 'çŸ¥æ€§ç³»', energy: 'å†…å‘', thinking: 'ç›´æ„Ÿ' },
  'yume_flamingo': { type: 'èª¿å’Œç³»', energy: 'å¤–å‘', thinking: 'æ„Ÿæƒ…' }
};

// ã‚¿ã‚¤ãƒ—é–“ã®ç›¸æ€§ã‚¹ã‚³ã‚¢
const TYPE_COMPATIBILITY = {
  'ç™’ã—ç³»': { 'ç™’ã—ç³»': 85, 'æ´»ç™ºç³»': 70, 'èª¿å’Œç³»': 90, 'ç†æƒ³å®¶': 75, 'æƒ…ç†±ç³»': 65, 'çŸ¥æ€§ç³»': 80, 'è‡ªç”±äºº': 60, 'èª å®Ÿç³»': 85 },
  'æ´»ç™ºç³»': { 'ç™’ã—ç³»': 70, 'æ´»ç™ºç³»': 75, 'èª¿å’Œç³»': 85, 'ç†æƒ³å®¶': 60, 'æƒ…ç†±ç³»': 90, 'çŸ¥æ€§ç³»': 65, 'è‡ªç”±äºº': 95, 'èª å®Ÿç³»': 60 },
  'èª¿å’Œç³»': { 'ç™’ã—ç³»': 90, 'æ´»ç™ºç³»': 85, 'èª¿å’Œç³»': 80, 'ç†æƒ³å®¶': 85, 'æƒ…ç†±ç³»': 75, 'çŸ¥æ€§ç³»': 85, 'è‡ªç”±äºº': 70, 'èª å®Ÿç³»': 90 },
  'ç†æƒ³å®¶': { 'ç™’ã—ç³»': 75, 'æ´»ç™ºç³»': 60, 'èª¿å’Œç³»': 85, 'ç†æƒ³å®¶': 90, 'æƒ…ç†±ç³»': 70, 'çŸ¥æ€§ç³»': 95, 'è‡ªç”±äºº': 75, 'èª å®Ÿç³»': 80 },
  'æƒ…ç†±ç³»': { 'ç™’ã—ç³»': 65, 'æ´»ç™ºç³»': 90, 'èª¿å’Œç³»': 75, 'ç†æƒ³å®¶': 70, 'æƒ…ç†±ç³»': 85, 'çŸ¥æ€§ç³»': 60, 'è‡ªç”±äºº': 90, 'èª å®Ÿç³»': 65 },
  'çŸ¥æ€§ç³»': { 'ç™’ã—ç³»': 80, 'æ´»ç™ºç³»': 65, 'èª¿å’Œç³»': 85, 'ç†æƒ³å®¶': 95, 'æƒ…ç†±ç³»': 60, 'çŸ¥æ€§ç³»': 90, 'è‡ªç”±äºº': 70, 'èª å®Ÿç³»': 95 },
  'è‡ªç”±äºº': { 'ç™’ã—ç³»': 60, 'æ´»ç™ºç³»': 95, 'èª¿å’Œç³»': 70, 'ç†æƒ³å®¶': 75, 'æƒ…ç†±ç³»': 90, 'çŸ¥æ€§ç³»': 70, 'è‡ªç”±äºº': 85, 'èª å®Ÿç³»': 55 },
  'èª å®Ÿç³»': { 'ç™’ã—ç³»': 85, 'æ´»ç™ºç³»': 60, 'èª¿å’Œç³»': 90, 'ç†æƒ³å®¶': 80, 'æƒ…ç†±ç³»': 65, 'çŸ¥æ€§ç³»': 95, 'è‡ªç”±äºº': 55, 'èª å®Ÿç³»': 90 }
};

// ç›¸æ€§è¨ˆç®—é–¢æ•°
function calculateCompatibility(userCharacterId, partnerCharacterId, userZodiac, partnerZodiac) {
  const zodiacScore = ZODIAC_COMPATIBILITY[userZodiac]?.[partnerZodiac] || 70;
  const userType = CHARACTER_TYPES[userCharacterId]?.type || 'ç™’ã—ç³»';
  const partnerType = CHARACTER_TYPES[partnerCharacterId]?.type || 'ç™’ã—ç³»';
  const typeScore = TYPE_COMPATIBILITY[userType]?.[partnerType] || 70;
  const totalScore = Math.round((zodiacScore * 0.5) + (typeScore * 0.5));
  
  let level, emoji, title;
  if (totalScore >= 90) {
    level = 'perfect';
    emoji = 'ğŸ’¯âœ¨';
    title = 'é‹å‘½ã®ç›¸æ€§';
  } else if (totalScore >= 80) {
    level = 'excellent';
    emoji = 'ğŸ’•';
    title = 'æœ€é«˜ã®ç›¸æ€§';
  } else if (totalScore >= 70) {
    level = 'good';
    emoji = 'ğŸ˜Š';
    title = 'è‰¯ã„ç›¸æ€§';
  } else if (totalScore >= 60) {
    level = 'normal';
    emoji = 'ğŸ‘';
    title = 'æ™®é€šã®ç›¸æ€§';
  } else {
    level = 'challenging';
    emoji = 'ğŸ’ª';
    title = 'æˆé•·ã§ãã‚‹ç›¸æ€§';
  }
  
  return {
    totalScore,
    zodiacScore,
    typeScore,
    level,
    emoji,
    title
  };
}

console.log('âœ… ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½ï¼ˆç›¸æ€§ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼‰ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
